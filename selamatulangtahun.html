<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Birthday Quest cmiwiw ğŸ‚</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&amp;family=Nunito:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    .font-title { font-family: 'Fredoka One', cursive; }
    .font-body { font-family: 'Nunito', sans-serif; }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes bounce-in {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px) rotate(-5deg); }
      75% { transform: translateX(10px) rotate(5deg); }
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(255, 182, 193, 0.5); }
      50% { box-shadow: 0 0 40px rgba(255, 182, 193, 0.8), 0 0 60px rgba(255, 215, 0, 0.4); }
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    .float-animation { animation: float 3s ease-in-out infinite; }
    .bounce-in { animation: bounce-in 0.6s ease-out forwards; }
    .shake { animation: shake 0.5s ease-in-out; }
    .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      top: -10px;
      animation: confetti-fall 3s linear forwards;
    }
    
    .sparkle {
      position: absolute;
      width: 20px;
      height: 20px;
      animation: sparkle 1.5s ease-in-out infinite;
    }
    
    .cake-candle {
      animation: float 1s ease-in-out infinite;
    }
    
    .progress-bar {
      transition: width 0.5s ease-out;
    }
    
    .gift-box {
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .gift-box:hover {
      transform: scale(1.1);
    }
    
    .balloon {
      animation: float 4s ease-in-out infinite;
    }
    
    .balloon:nth-child(2) { animation-delay: 0.5s; }
    .balloon:nth-child(3) { animation-delay: 1s; }
    .balloon:nth-child(4) { animation-delay: 1.5s; }
    .balloon:nth-child(5) { animation-delay: 2s; }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-body">
  <div id="app" class="h-full w-full overflow-auto"><!-- Screen 1: Welcome -->
   <div id="screen-welcome" class="min-h-full w-full flex flex-col items-center justify-center p-6 relative" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);">
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
     <div class="balloon absolute left-[10%] top-[20%] text-6xl">
      ğŸˆ
     </div>
     <div class="balloon absolute right-[15%] top-[15%] text-5xl">
      ğŸˆ
     </div>
     <div class="balloon absolute left-[20%] bottom-[30%] text-4xl">
      ğŸˆ
     </div>
     <div class="balloon absolute right-[10%] bottom-[25%] text-6xl">
      ğŸˆ
     </div>
     <div class="balloon absolute left-[50%] top-[10%] text-5xl">
      ğŸˆ
     </div>
    </div>
    <div class="text-center z-10">
     <div class="text-8xl mb-6 float-animation">
      ğŸ
     </div>
     <h1 id="welcome-title" class="font-title text-4xl md:text-6xl text-white mb-4 drop-shadow-lg">Birthday Quest cmiwiw!</h1>
     <p class="text-white text-xl mb-8 opacity-90">Selesaikan misi untuk membuka kejutan! ğŸ‰</p><button onclick="startGame()" class="px-8 py-4 text-xl font-bold rounded-full shadow-lg transform hover:scale-105 transition-all pulse-glow" style="background: #FFD700; color: #764ba2;"> ğŸš€ Mulai Petualangan! </button>
    </div>
   </div><!-- Screen 2: Mission 1 - Pop Balloons -->
   <div id="screen-mission1" class="min-h-full w-full flex flex-col items-center justify-center p-6 hidden" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
    <div class="text-center max-w-2xl w-full">
     <div class="mb-4 px-4 py-2 rounded-full inline-block" style="background: rgba(255,255,255,0.2);"><span class="text-white font-bold">Misi 1 dari 3</span>
     </div>
     <h2 class="font-title text-3xl md:text-4xl text-white mb-2">ğŸˆ Pecahkan Balon!</h2>
     <p class="text-white mb-6 opacity-90">Klik semua balon untuk melanjutkan!</p>
     <div class="mb-6">
      <div class="h-3 rounded-full overflow-hidden" style="background: rgba(255,255,255,0.3);">
       <div id="mission1-progress" class="progress-bar h-full rounded-full" style="width: 0%; background: #FFD700;"></div>
      </div>
      <p id="mission1-count" class="text-white mt-2 font-bold">0 / 5 balon dipecahkan</p>
     </div>
     <div id="balloons-container" class="grid grid-cols-5 gap-4 justify-center mb-6"><button onclick="popBalloon(this, 0)" class="balloon-btn text-5xl transform hover:scale-125 transition-transform">ğŸˆ</button> <button onclick="popBalloon(this, 1)" class="balloon-btn text-5xl transform hover:scale-125 transition-transform">ğŸˆ</button> <button onclick="popBalloon(this, 2)" class="balloon-btn text-5xl transform hover:scale-125 transition-transform">ğŸˆ</button> <button onclick="popBalloon(this, 3)" class="balloon-btn text-5xl transform hover:scale-125 transition-transform">ğŸˆ</button> <button onclick="popBalloon(this, 4)" class="balloon-btn text-5xl transform hover:scale-125 transition-transform">ğŸˆ</button>
     </div>
    </div>
   </div><!-- Screen 3: Mission 2 - Blow Candles -->
   <div id="screen-mission2" class="min-h-full w-full flex flex-col items-center justify-center p-6 hidden" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
    <div class="text-center max-w-2xl w-full">
     <div class="mb-4 px-4 py-2 rounded-full inline-block" style="background: rgba(255,255,255,0.2);"><span class="text-white font-bold">Misi 2 dari 3</span>
     </div>
     <h2 class="font-title text-3xl md:text-4xl text-white mb-2">ğŸ‚ Tiup Lilin!</h2>
     <p class="text-white mb-6 opacity-90">Klik lilin untuk meniupnya! Make a wish! âœ¨</p>
     <div class="mb-6">
      <div class="h-3 rounded-full overflow-hidden" style="background: rgba(255,255,255,0.3);">
       <div id="mission2-progress" class="progress-bar h-full rounded-full" style="width: 0%; background: #FFD700;"></div>
      </div>
      <p id="mission2-count" class="text-white mt-2 font-bold">0 / 5 lilin ditiup</p>
     </div><!-- Cake SVG -->
     <div class="relative inline-block mb-6">
      <svg width="280" height="200" viewbox="0 0 280 200" class="drop-shadow-xl"><!-- Cake base --> <ellipse cx="140" cy="180" rx="120" ry="15" fill="#8B4513" /> <rect x="20" y="120" width="240" height="60" rx="10" fill="#FFB6C1" /> <rect x="40" y="80" width="200" height="50" rx="8" fill="#FFC0CB" /> <rect x="60" y="50" width="160" height="40" rx="6" fill="#FFD700" /> <!-- Decorations --> <circle cx="60" cy="145" r="8" fill="#FF69B4" /> <circle cx="100" cy="145" r="8" fill="#FFD700" /> <circle cx="140" cy="145" r="8" fill="#FF69B4" /> <circle cx="180" cy="145" r="8" fill="#FFD700" /> <circle cx="220" cy="145" r="8" fill="#FF69B4" /> <!-- Frosting drips --> <path d="M50 80 Q55 95 50 100 Q45 95 50 80" fill="#FFFFFF" /> <path d="M90 80 Q95 100 90 105 Q85 100 90 80" fill="#FFFFFF" /> <path d="M130 80 Q135 95 130 100 Q125 95 130 80" fill="#FFFFFF" /> <path d="M170 80 Q175 100 170 105 Q165 100 170 80" fill="#FFFFFF" /> <path d="M210 80 Q215 95 210 100 Q205 95 210 80" fill="#FFFFFF" />
      </svg><!-- Candles -->
      <div id="candles-container" class="absolute top-0 left-0 w-full flex justify-center gap-6" style="top: 10px;"><button onclick="blowCandle(this, 0)" class="candle-btn flex flex-col items-center cursor-pointer transform hover:scale-110 transition-transform"> <span class="candle-flame text-2xl cake-candle">ğŸ”¥</span>
        <div class="w-3 h-8 rounded-sm" style="background: linear-gradient(to bottom, #FF6B6B, #EE5A5A);"></div></button> <button onclick="blowCandle(this, 1)" class="candle-btn flex flex-col items-center cursor-pointer transform hover:scale-110 transition-transform"> <span class="candle-flame text-2xl cake-candle" style="animation-delay: 0.2s;">ğŸ”¥</span>
        <div class="w-3 h-8 rounded-sm" style="background: linear-gradient(to bottom, #4ECDC4, #44A08D);"></div></button> <button onclick="blowCandle(this, 2)" class="candle-btn flex flex-col items-center cursor-pointer transform hover:scale-110 transition-transform"> <span class="candle-flame text-2xl cake-candle" style="animation-delay: 0.4s;">ğŸ”¥</span>
        <div class="w-3 h-8 rounded-sm" style="background: linear-gradient(to bottom, #A8E6CF, #88D8B0);"></div></button> <button onclick="blowCandle(this, 3)" class="candle-btn flex flex-col items-center cursor-pointer transform hover:scale-110 transition-transform"> <span class="candle-flame text-2xl cake-candle" style="animation-delay: 0.6s;">ğŸ”¥</span>
        <div class="w-3 h-8 rounded-sm" style="background: linear-gradient(to bottom, #FFE66D, #F4D35E);"></div></button> <button onclick="blowCandle(this, 4)" class="candle-btn flex flex-col items-center cursor-pointer transform hover:scale-110 transition-transform"> <span class="candle-flame text-2xl cake-candle" style="animation-delay: 0.8s;">ğŸ”¥</span>
        <div class="w-3 h-8 rounded-sm" style="background: linear-gradient(to bottom, #C9B1FF, #A78BFA);"></div></button>
      </div>
     </div>
    </div>
   </div><!-- Screen 4: Mission 3 - Open Gift -->
   <div id="screen-mission3" class="min-h-full w-full flex flex-col items-center justify-center p-6 hidden" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="text-center max-w-2xl w-full">
     <div class="mb-4 px-4 py-2 rounded-full inline-block" style="background: rgba(255,255,255,0.2);"><span class="text-white font-bold">Misi 3 dari 3</span>
     </div>
     <h2 class="font-title text-3xl md:text-4xl text-white mb-2">ğŸ Buka Hadiahnya!</h2>
     <p class="text-white mb-8 opacity-90">Klik kotak hadiah untuk membukanya!</p><button id="gift-box" onclick="openGift()" class="gift-box relative inline-block">
      <div class="text-9xl shake">
       ğŸ
      </div>
      <div class="absolute -top-2 -right-2 text-3xl sparkle" style="animation-delay: 0s;">
       âœ¨
      </div>
      <div class="absolute -top-2 -left-2 text-3xl sparkle" style="animation-delay: 0.5s;">
       âœ¨
      </div>
      <div class="absolute -bottom-2 -right-2 text-3xl sparkle" style="animation-delay: 1s;">
       âœ¨
      </div></button>
     <p class="text-white mt-6 text-lg opacity-80">Tap untuk membuka! ğŸ‘†</p>
    </div>
   </div><!-- Screen 5: Final Celebration -->
   <div id="screen-final" class="min-h-full w-full flex flex-col items-center justify-center p-6 hidden relative overflow-hidden" style="background: linear-gradient(135deg, #FFD700 0%, #FF6B6B 50%, #C9B1FF 100%);">
    <div id="confetti-container" class="fixed inset-0 pointer-events-none z-10"></div>
    <div class="text-center z-20 max-w-2xl">
     <div class="text-8xl mb-6 bounce-in">
      ğŸ‰
     </div>
     <h1 id="final-title" class="font-title text-4xl md:text-6xl text-white mb-4 drop-shadow-lg bounce-in" style="animation-delay: 0.2s;">Selamat Ulang Tahun</h1>
     <div id="recipient-display" class="font-title text-3xl md:text-5xl mb-6 bounce-in" style="color: #764ba2; animation-delay: 0.4s;">
      ğŸŒŸ Zulfasyaaa ğŸŒŸ
     </div>
     <div class="rounded-3xl p-6 mb-6 bounce-in shadow-2xl" style="background: rgba(255,255,255,0.95); animation-delay: 0.6s;">
      <p class="text-xl md:text-2xl mb-4" style="color: #764ba2;">ğŸ‚ Semoga di hari yang spesial ini...</p>
      <ul class="text-left text-lg space-y-3 mb-4" style="color: #666;">
       <li class="flex items-center gap-2"><span class="text-2xl">ğŸ’«</span> <span>Semua mimpimu jadi kenyataan!</span></li>
       <li class="flex items-center gap-2"><span class="text-2xl">ğŸ˜„</span> <span>Selalu diberikan kebahagiaan!</span></li>
       <li class="flex items-center gap-2"><span class="text-2xl">ğŸ’ª</span> <span>Sehat selalu dan makin sukses!</span></li>
       <li class="flex items-center gap-2"><span class="text-2xl">â¤ï¸</span> <span>Dikelilingi orang-orang tersayang!</span></li>
      </ul>
      <p id="custom-msg-display" class="text-lg italic" style="color: #f5576c;">"Hidup sekali, hiduplah yang berarti" âœ¨</p>
     </div>
     <div class="flex flex-wrap justify-center gap-4 bounce-in" style="animation-delay: 0.8s;"><button onclick="restartGame()" class="px-6 py-3 text-lg font-bold rounded-full shadow-lg transform hover:scale-105 transition-all" style="background: #764ba2; color: white;"> ğŸ”„ Main Lagi </button> <button onclick="triggerConfetti()" class="px-6 py-3 text-lg font-bold rounded-full shadow-lg transform hover:scale-105 transition-all" style="background: #FF6B6B; color: white;"> ğŸŠ Lebih Banyak Confetti! </button>
     </div>
     <div class="mt-8 text-6xl flex justify-center gap-2"><span class="float-animation" style="animation-delay: 0s;">ğŸˆ</span> <span class="float-animation" style="animation-delay: 0.3s;">ğŸ‚</span> <span class="float-animation" style="animation-delay: 0.6s;">ğŸ</span> <span class="float-animation" style="animation-delay: 0.9s;">ğŸ‰</span> <span class="float-animation" style="animation-delay: 1.2s;">ğŸˆ</span>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Game State
    let balloonsPopped = 0;
    let candlesBlown = 0;
    const totalBalloons = 5;
    const totalCandles = 5;
    
    // Config
    const defaultConfig = {
      recipient_name: "Zulfasyaaa",
      custom_message: "Hidup sekali, hiduplah yang berarti"
    };
    
    let config = { ...defaultConfig };
    
    // Element SDK Integration
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (newConfig) => {
          config = { ...defaultConfig, ...newConfig };
          updateDisplay();
        },
        mapToCapabilities: () => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (cfg) => new Map([
          ["recipient_name", cfg.recipient_name || defaultConfig.recipient_name],
          ["custom_message", cfg.custom_message || defaultConfig.custom_message]
        ])
      });
    }
    
    function updateDisplay() {
      const recipientDisplay = document.getElementById('recipient-display');
      const customMsgDisplay = document.getElementById('custom-msg-display');
      
      if (recipientDisplay) {
        recipientDisplay.textContent = `ğŸŒŸ ${config.recipient_name || defaultConfig.recipient_name}! ğŸŒŸ`;
      }
      if (customMsgDisplay) {
        customMsgDisplay.textContent = `"${config.custom_message || defaultConfig.custom_message}" âœ¨`;
      }
    }
    
    // Screen Management
    function showScreen(screenId) {
      const screens = ['screen-welcome', 'screen-mission1', 'screen-mission2', 'screen-mission3', 'screen-final'];
      screens.forEach(id => {
        const screen = document.getElementById(id);
        if (screen) {
          screen.classList.add('hidden');
        }
      });
      const targetScreen = document.getElementById(screenId);
      if (targetScreen) {
        targetScreen.classList.remove('hidden');
      }
    }
    
    // Game Functions
    function startGame() {
      resetGame();
      showScreen('screen-mission1');
    }
    
    function resetGame() {
      balloonsPopped = 0;
      candlesBlown = 0;
      
      // Reset balloons
      document.querySelectorAll('.balloon-btn').forEach(btn => {
        btn.textContent = 'ğŸˆ';
        btn.disabled = false;
        btn.style.opacity = '1';
      });
      
      // Reset candles
      document.querySelectorAll('.candle-flame').forEach(flame => {
        flame.textContent = 'ğŸ”¥';
        flame.style.opacity = '1';
      });
      document.querySelectorAll('.candle-btn').forEach(btn => {
        btn.disabled = false;
      });
      
      // Reset progress
      updateMission1Progress();
      updateMission2Progress();
    }
    
    function popBalloon(btn, index) {
      if (btn.disabled) return;
      
      btn.textContent = 'ğŸ’¥';
      btn.disabled = true;
      btn.classList.add('shake');
      
      setTimeout(() => {
        btn.textContent = 'âœ¨';
        btn.style.opacity = '0.5';
        btn.classList.remove('shake');
      }, 300);
      
      balloonsPopped++;
      updateMission1Progress();
      
      if (balloonsPopped >= totalBalloons) {
        setTimeout(() => {
          showScreen('screen-mission2');
        }, 800);
      }
    }
    
    function updateMission1Progress() {
      const progress = document.getElementById('mission1-progress');
      const count = document.getElementById('mission1-count');
      const percentage = (balloonsPopped / totalBalloons) * 100;
      
      if (progress) progress.style.width = percentage + '%';
      if (count) count.textContent = `${balloonsPopped} / ${totalBalloons} balon dipecahkan`;
    }
    
    function blowCandle(btn, index) {
      if (btn.disabled) return;
      
      const flame = btn.querySelector('.candle-flame');
      if (flame) {
        flame.textContent = 'ğŸ’¨';
        setTimeout(() => {
          flame.textContent = 'ğŸ’«';
          flame.style.opacity = '0.5';
        }, 300);
      }
      btn.disabled = true;
      
      candlesBlown++;
      updateMission2Progress();
      
      if (candlesBlown >= totalCandles) {
        setTimeout(() => {
          showScreen('screen-mission3');
        }, 800);
      }
    }
    
    function updateMission2Progress() {
      const progress = document.getElementById('mission2-progress');
      const count = document.getElementById('mission2-count');
      const percentage = (candlesBlown / totalCandles) * 100;
      
      if (progress) progress.style.width = percentage + '%';
      if (count) count.textContent = `${candlesBlown} / ${totalCandles} lilin ditiup`;
    }
    
    function openGift() {
      const giftBox = document.getElementById('gift-box');
      if (giftBox) {
        giftBox.innerHTML = '<div class="text-9xl bounce-in">ğŸŠ</div>';
      }
      
      setTimeout(() => {
        showScreen('screen-final');
        updateDisplay();
        triggerConfetti();
      }, 800);
    }
    
    function triggerConfetti() {
      const container = document.getElementById('confetti-container');
      if (!container) return;
      
      const colors = ['#FF6B6B', '#FFD700', '#4ECDC4', '#C9B1FF', '#FF69B4', '#38ef7d'];
      const shapes = ['â—', 'â– ', 'â–²', 'â˜…', 'â™¦'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 2 + 's';
        confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
        
        if (Math.random() > 0.5) {
          confetti.style.borderRadius = '50%';
        }
        
        container.appendChild(confetti);
        
        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }
    
    function restartGame() {
      showScreen('screen-welcome');
      resetGame();
    }
    
    // Initialize
    updateDisplay();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c70c80cf6d29e29',t:'MTc2OTk0MTkxMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>